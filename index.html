<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>VocabNotes ‚Äî Ghi ch√∫ & L∆∞u tr·ªØ t·ª´ v·ª±ng EN ‚ÜîÔ∏è VI</title>
    <style>
    :root{
  --bg:#0f1724; 
  --card:#111827; 
  --muted:#9aa4b2; 
  --accent:#7c3aed; 
  --glass: rgba(255,255,255,0.04);
  --radius:14px; 
  --gap:16px; 
  --max-width:1100px;
  --glass-2: rgba(255,255,255,0.02);
}

*{box-sizing:border-box}

body{
  margin:0; 
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: linear-gradient(180deg,#071126 0%, #081226 60%); 
  color:#e6eef8; 
  -webkit-font-smoothing:antialiased;
  padding:24px; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  min-height:100vh;
}

.app{width:100%; max-width:var(--max-width);} 
header{display:flex; align-items:center; gap:16px; margin-bottom:18px}
.logo{display:flex; align-items:center; gap:12px}
.badge{
  width:48px;
  height:48px;
  border-radius:12px;
  background:linear-gradient(135deg,var(--accent),#06b6d4);
  display:grid;
  place-items:center;
  font-weight:700;
  color:#fff;
  box-shadow:0 0 16px rgba(124,58,237,0.6);
}
h1{margin:0;font-size:20px}
p.lead{margin:0;color:var(--muted); font-size:13px}

.grid{display:grid; grid-template-columns: 360px 1fr; gap:var(--gap)}

/* ==== PANEL ==== */
.panel{
  background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  border-radius:var(--radius); 
  padding:16px; 
  box-shadow: 0 6px 24px rgba(2,6,23,0.6);
  backdrop-filter: blur(8px);
}

/* ==== INPUTS ==== */
label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
input[type=text], textarea, select {
  width: 100%;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.05);
  color: inherit;
  outline: none;
  font-size: 14px;
  transition: all 0.25s ease;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
  backdrop-filter: blur(8px);
}
input[type=text]:focus, textarea:focus, select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.25);
  background: rgba(255, 255, 255, 0.08);
}
textarea { min-height: 90px; resize: vertical; }
::placeholder { color: rgba(230, 238, 248, 0.5); font-style: italic; }

/* ==== BUTTONS ==== */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:10px 14px;
  border-radius:10px;
  border:0;
  cursor:pointer;
  font-weight:500;
  transition:all .25s ease;
}
.btn.primary{
  background:linear-gradient(90deg,var(--accent),#06b6d4);
  color:#021124;
  box-shadow:0 0 12px rgba(124,58,237,0.4);
}
.btn.primary:hover{
  transform:translateY(-2px);
  box-shadow:0 0 20px rgba(124,58,237,0.6);
}
.btn.ghost{
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.06);
  color:var(--muted);
}
.btn.ghost:hover{
  border-color:rgba(255,255,255,0.15);
  background:rgba(255,255,255,0.06);
  color:#fff;
}
.btn.small{
  font-size:13px;
  padding:6px 10px;
  border-radius:8px;
}
.known{background:rgba(34,197,94,0.12); color:#bbf7d0;}
.unknown{background:rgba(248,113,113,0.08); color:#ffdede;}
.controls{display:flex; gap:8px; margin-top:12px}

/* ==== LIST ==== */
.searchbar{display:flex; gap:8px; margin-bottom:12px; align-items:center}
.searchbar input[type=text]{flex:1}
.list{display:grid; gap:12px}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:12px; padding:12px;
  display:flex; justify-content:space-between; align-items:flex-start;
  box-shadow:0 8px 18px rgba(2,6,23,0.6);
  transition:all 0.2s ease;
}
.card:hover{transform:translateY(-4px); box-shadow:0 8px 28px rgba(124,58,237,0.25);}
.left{max-width:72%}
.word{font-size:16px; font-weight:600; margin:0}
.trans{color:var(--muted); margin:6px 0 0}
.meta{display:flex; gap:8px; margin-top:8px; flex-wrap:wrap}
.tag{font-size:12px;padding:6px 8px;border-radius:999px;background:var(--glass-2);color:var(--muted)}
.actions{display:flex; gap:8px; align-items:center}

footer{margin-top:12px;color:var(--muted);font-size:12px}

/* ==== RESPONSIVE ==== */
@media (max-width:900px){
  .grid{grid-template-columns:1fr;}
  .left{max-width:100%}
}
input,textarea,button,select{transition:all .18s ease}

  </style>
  </head>
  <body>
    <div class="app">
      <header>
        <div class="logo">
          <div class="badge">VN</div>
          <div>
            <h1>VocabNotes</h1>
            <p class="lead">Ghi ch√∫ & l∆∞u tr·ªØ t·ª´ v·ª±ng Anh ‚Üî Vi·ªát ‚Äî l∆∞u t·∫°i tr√¨nh
              duy·ªát</p>
          </div>
        </div>
      </header>

      <main class="grid">
        <section class="panel" aria-label="Th√™m t·ª´ m·ªõi">
          <h3 style="margin-top:0">Th√™m / S·ª≠a t·ª´</h3>
          <form id="entryForm">
            <label for="english">Ti·∫øng Anh</label>
            <input id="english" placeholder="e.g. innovate" required />

            <label for="vietnamese" style="margin-top:10px">Ti·∫øng Vi·ªát</label>
            <input id="vietnamese" placeholder="e.g. ƒë·ªïi m·ªõi / s√°ng t·∫°o"
              required />

            <label for="notes" style="margin-top:10px">Ghi ch√∫ / V√≠ d·ª•</label>
            <textarea id="notes"
              placeholder="V√≠ d·ª•: innovate -> to introduce new things"></textarea>

            <div class="controls">
              <button class="btn primary" type="submit">L∆∞u t·ª´</button>
              <button type="button" id="clearForm" class="btn ghost">X√≥a
                form</button>
            </div>
          </form>

          <hr
            style="margin:14px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)" />
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button id="clearAll" class="btn small"
              style="background:rgba(220,38,38,0.12)">X√≥a t·∫•t c·∫£</button>
          </div>

          <footer>
            D·ªØ li·ªáu l∆∞u t·∫°i localStorage c·ªßa tr√¨nh duy·ªát. C√≥ th·ªÉ xu·∫•t / nh·∫≠p ƒë·ªÉ
            ƒë·ªìng b·ªô ho·∫∑c sao l∆∞u.
          </footer>
        </section>

        <section>
          <div class="panel" style="margin-bottom:12px">
            <div class="searchbar">
              <input id="search" placeholder="T√¨m ki·∫øm t·ª´ / nghƒ©a / th·∫ª..." />
              <select id="filter">
                <option value="all">T·∫•t c·∫£</option>
                <option value="known">ƒê√£ nh·ªõ</option>
                <option value="unknown">Ch∆∞a nh·ªõ</option>
              </select>
              <select id="sort">
                <option value="new">M·ªõi nh·∫•t</option>
                <option value="alpha">A ‚Üí Z</option>
              </select>
            </div>

            <div id="list" class="list" aria-live="polite"></div>
          </div>
        </section>
      </main>
    </div>

    <!-- üß† SCRIPT - c√≥ ph√¢n trang -->
    <script>
  const STORAGE_KEY = 'vocabnotes.entries.v1';
  const entryForm = document.getElementById('entryForm');
  const englishInput = document.getElementById('english');
  const vietnameseInput = document.getElementById('vietnamese');
  const notesInput = document.getElementById('notes');
  const tagsInput = document.getElementById('tags'); // c√≥ th·ªÉ null n·∫øu input b·ªã x√≥a
  const listEl = document.getElementById('list');
  const searchInput = document.getElementById('search');
  const filterSelect = document.getElementById('filter');
  const sortSelect = document.getElementById('sort');
  const clearFormBtn = document.getElementById('clearForm');
  const exportBtn = document.getElementById('exportBtn');
  const importBtn = document.getElementById('importBtn');
  const seedBtn = document.getElementById('seedBtn');
  const clearAllBtn = document.getElementById('clearAll');

  let entries = loadEntries();
  let editingId = null;
  let currentPage = 1;
  const perPage = 5;

  render();

  entryForm.addEventListener('submit', e => {
    e.preventDefault();
    const eng = englishInput.value.trim();
    const vi = vietnameseInput.value.trim();
    if (!eng || !vi) return alert('Vui l√≤ng nh·∫≠p Ti·∫øng Anh v√† Ti·∫øng Vi·ªát.');
    const notes = notesInput.value.trim();
    // n·∫øu kh√¥ng c√≥ input th·∫ª -> tr·∫£ v·ªÅ m·∫£ng r·ªóng
    const tags = tagsInput ? tagsInput.value.split(',').map(s => s.trim()).filter(Boolean) : [];

    if (editingId) {
      const idx = entries.findIndex(x => x.id === editingId);
      if (idx !== -1) {
        entries[idx] = { ...entries[idx], english: eng, vietnamese: vi, notes, tags };
        saveEntries();
        editingId = null;
      }
    } else {
      const entry = {
        id: genId(),
        english: eng,
        vietnamese: vi,
        notes,
        tags,
        known: false,
        created: Date.now()
      };
      entries.unshift(entry);
      saveEntries();
    }
    entryForm.reset();
    currentPage = 1;
    render();
  });

  clearFormBtn.addEventListener('click', () => { editingId = null; entryForm.reset(); englishInput.focus(); });

  function toggleKnown(id) { const e = entries.find(x => x.id === id); if (!e) return; e.known = !e.known; saveEntries(); render(); }
  function removeEntry(id) { if (!confirm('X√≥a t·ª´ n√†y?')) return; entries = entries.filter(x => x.id !== id); saveEntries(); if ((currentPage - 1) * perPage >= entries.length && currentPage > 1) currentPage--; render(); }
  function editEntry(id) {
    const e = entries.find(x => x.id === id);
    if (!e) return;
    editingId = id;
    englishInput.value = e.english;
    vietnameseInput.value = e.vietnamese;
    notesInput.value = e.notes || '';
    if (tagsInput) tagsInput.value = (e.tags || []).join(', ');
    englishInput.focus();
  }

  function saveEntries() { localStorage.setItem(STORAGE_KEY, JSON.stringify(entries)); }
  function loadEntries() { try { const raw = localStorage.getItem(STORAGE_KEY); if (!raw) return []; return JSON.parse(raw).map(normalizeEntry); } catch (e) { console.error(e); return []; } }
  function normalizeEntry(e) { return { id: e.id || genId(), english: e.english || '', vietnamese: e.vietnamese || '', notes: e.notes || '', tags: e.tags || [], known: !!e.known, created: e.created || Date.now() } }
  function genId() { return 'id_' + Math.random().toString(36).slice(2, 9) + Date.now().toString(36).slice(-4); }

  function render() {
    const q = searchInput.value.trim().toLowerCase();
    const filter = filterSelect.value;
    const sort = sortSelect.value;
    let list = entries.slice();
    if (filter === 'known') list = list.filter(x => x.known);
    if (filter === 'unknown') list = list.filter(x => !x.known);
    if (q) {
      list = list.filter(x =>
        x.english.toLowerCase().includes(q) ||
        x.vietnamese.toLowerCase().includes(q) ||
        (x.notes || '').toLowerCase().includes(q) ||
        (x.tags || []).join(' ').toLowerCase().includes(q)
      );
    }
    if (sort === 'alpha') list.sort((a, b) => a.english.localeCompare(b.english));
    else list.sort((a, b) => b.created - a.created);

    const totalPages = Math.max(1, Math.ceil(list.length / perPage));
    if (currentPage > totalPages) currentPage = totalPages;
    const start = (currentPage - 1) * perPage;
    const pageList = list.slice(start, start + perPage);

    listEl.innerHTML = '';
    if (list.length === 0) {
      listEl.innerHTML = '<div style="color:var(--muted);padding:18px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);">Kh√¥ng c√≥ d·ªØ li·ªáu. Th√™m t·ª´ m·ªõi ·ªü b√™n tr√°i.</div>';
      return;
    }

    pageList.forEach(it => {
      const card = document.createElement('article'); card.className = 'card';
      const left = document.createElement('div'); left.className = 'left';
      const w = document.createElement('h4'); w.className = 'word'; w.textContent = it.english;
      const t = document.createElement('div'); t.className = 'trans'; t.textContent = it.vietnamese;
      const m = document.createElement('div'); m.className = 'meta'; (it.tags || []).forEach(tag => { const tg = document.createElement('span'); tg.className = 'tag'; tg.textContent = tag; m.appendChild(tg); });
      left.appendChild(w); left.appendChild(t); left.appendChild(m);
      if (it.notes) { const n = document.createElement('div'); n.style.marginTop = '8px'; n.style.fontSize = '13px'; n.style.color = 'var(--muted)'; n.textContent = it.notes; left.appendChild(n); }
      const right = document.createElement('div'); right.className = 'actions';
      const knownBtn = document.createElement('button'); knownBtn.className = 'btn small ' + (it.known ? 'known' : 'unknown'); knownBtn.textContent = it.known ? 'ƒê√£ nh·ªõ' : 'Ch∆∞a nh·ªõ'; knownBtn.onclick = () => toggleKnown(it.id);
      const editBtn = document.createElement('button'); editBtn.className = 'btn small ghost'; editBtn.textContent = 'S·ª≠a'; editBtn.onclick = () => editEntry(it.id);
      const delBtn = document.createElement('button'); delBtn.className = 'btn small ghost'; delBtn.textContent = 'X√≥a'; delBtn.onclick = () => removeEntry(it.id);
      right.append(knownBtn, editBtn, delBtn);
      card.append(left, right);
      listEl.append(card);
    });

    const pager = document.createElement('div');
    pager.style.display = 'flex'; pager.style.justifyContent = 'center'; pager.style.alignItems = 'center'; pager.style.marginTop = '12px'; pager.style.gap = '8px';
    pager.innerHTML = `
      <button class="btn small ghost" ${currentPage === 1 ? 'disabled' : ''} id="prevPage">¬´ Tr∆∞·ªõc</button>
      <span style="font-size:13px;color:var(--muted)">Trang ${currentPage}/${totalPages}</span>
      <button class="btn small ghost" ${currentPage === totalPages ? 'disabled' : ''} id="nextPage">Sau ¬ª</button>
    `;
    listEl.appendChild(pager);
    pager.querySelector('#prevPage')?.addEventListener('click', () => { if (currentPage > 1) { currentPage--; render(); } });
    pager.querySelector('#nextPage')?.addEventListener('click', () => { if (currentPage < totalPages) { currentPage++; render(); } });
  }

  [searchInput, filterSelect, sortSelect].forEach(el => el.addEventListener('input', () => { currentPage = 1; render(); }));

  exportBtn.addEventListener('click', () => {
    const blob = new Blob([JSON.stringify(entries, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'vocabnotes-export-' + new Date().toISOString().slice(0, 10) + '.json'; a.click(); URL.revokeObjectURL(url);
  });

  importBtn.addEventListener('click', () => {
    const input = document.createElement('input'); input.type = 'file'; input.accept = 'application/json';
    input.onchange = e => {
      const f = e.target.files[0]; if (!f) return;
      const reader = new FileReader(); reader.onload = ev => {
        try {
          const data = JSON.parse(ev.target.result);
          if (!Array.isArray(data)) return alert('File kh√¥ng h·ª£p l·ªá (c·∫ßn 1 m·∫£ng entries).');
          const existingIds = new Set(entries.map(x => x.id));
          data.forEach(d => { const ne = normalizeEntry(d); if (existingIds.has(ne.id)) ne.id = genId(); entries.push(ne); });
          saveEntries(); currentPage = 1; render(); alert('Nh·∫≠p th√†nh c√¥ng: ' + data.length + ' m·ª•c.');
        } catch (err) { alert('Kh√¥ng ƒë·ªçc ƒë∆∞·ª£c file: ' + err.message); }
      };
      reader.readAsText(f);
    };
    input.click();
  });

  seedBtn.addEventListener('click', () => {
    const samples = [
      { english: 'innovate', vietnamese: 'ƒë·ªïi m·ªõi, s√°ng t·∫°o', notes: 'to introduce new methods, ideas, or products', tags: ['general', 'verb'] },
      { english: 'consequence', vietnamese: 'h·∫≠u qu·∫£, k·∫øt qu·∫£', notes: 'the result or effect of an action', tags: ['noun'] },
      { english: 'apply for', vietnamese: 'n·ªôp ƒë∆°n xin', notes: 'apply for a job/scholarship', tags: ['phrasal verb'] }
    ];
    samples.reverse().forEach(s => entries.unshift({ ...s, id: genId(), known: false, created: Date.now() }));
    saveEntries(); render();
  });

  clearAllBtn.addEventListener('click', () => {
    if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a to√†n b·ªô d·ªØ li·ªáu?')) {
      entries = []; saveEntries(); render();
    }
  });
</script>

  </body>
</html>
